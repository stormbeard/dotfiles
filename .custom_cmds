# Tony's custom functions.
# Author: Tony Allen (cyril0allen@gmail.com)

# Highlight text in various output.
function hi {
  egrep --color -i "$1|$" $2
}

# Remove IP from known hosts.
function rmkh {
  cat ~/.ssh/known_hosts | grep -v $1 > ~/.ssh/known_hosts
}

# Generate cscope db for rook and open cscope.
function rookcs {
  cdrook &&

  find . -name \*.go | grep -v ./vendor\* > cscope.files &&

  cscope -k -q
}

function cdtop {
  while [[ ! -d $PWD/.git ]]
  do
    if [[ $PWD = "/" ]]; then 
      break
    fi

    cd ..
  done
}

# For filling out forms with vim.
function form {
  rm /tmp/form.what
  vim /tmp/form.what
  cat /tmp/form.what
}

function notevim {
  vim +'normal Go' +'normal Go' +'normal 80i-' +'r!date' +'normal Go' +'normal 80i-' +'normal Go' $1
}

# NOTES
function note {
  mkdir -p ~/Dropbox/notes 
  notevim ~/Dropbox/notes/append.note
}

function lnote {
  mkdir -p ~/Dropbox/notes 
  notevim ~/Dropbox/notes/lyft.note
}

function todo {
  mkdir -p ~/Dropbox/notes 
  vim  ~/Dropbox/notes/todo.note
}

function errlog {
  mkdir -p ~/Dropbox/notes 
  notevim  ~/Dropbox/notes/errlog.note
}


function ldone {
  mkdir -p ~/Dropbox/notes 
  notevim  ~/Dropbox/notes/done.note
}


###################################################################################################
# Lyft
###################################################################################################

# VPN
function lvpn {
  echo IeThach8 | xclip -sel clip
  cd ~/.vpn/
  ./vpn
}


# Bazel commands
ENVOY_CXX=clang++-6.0
TONY_BAZEL_OPTS="-c dbg --config=clang-asan  --copt=-fno-limit-debug-info"
function btest {
  CXX=$ENVOY_CXX bazel test $TONY_BAZEL_OPTS $@
}

function bb {
  CXX=$ENVOY_CXX bazel build $TONY_BAZEL_OPTS $@
}

function bbnt {
  CXX=$ENVOY_CXX bazel build $TONY_BAZEL_OPTS $@
}
